
/* /web_studio/static/src/js/action_manager.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.ActionManager',function(require){"use strict";var ActionManager=require('web.ActionManager');var bus=require('web_studio.bus');ActionManager.include({custom_events:_.extend({},ActionManager.prototype.custom_events,{'reload_action':'_onReloadAction',}),init:function(){this._super.apply(this,arguments);this.studioControllerIndex=undefined;bus.on('edition_mode_entered',this,this._onEditionModeEntered);bus.on('studio_toggled',this,this._onStudioToggled);},clearUncommittedChanges:function(){var currentController=this.getCurrentController();if(currentController&&!currentController.widget){return Promise.resolve();}
return this._super.apply(this,arguments);},getCurrentStudioAction:function(){var controller=this.getCurrentStudioController();return controller?this.actions[controller.actionID]:null;},getCurrentStudioController:function(){var controllerID=this.controllerStack[this.studioControllerIndex];var controller=this.controllers[controllerID];return controller;},getLastAction:function(){var currentControllerID=_.last(this.controllerStack);var controller=currentControllerID?this.controllers[currentControllerID]:null;return controller?this.actions[controller.actionID]:null;},restoreStudioAction:function(){var self=this;var studioControllerIndex=this.studioControllerIndex;var controllerID=this.controllerStack[studioControllerIndex];var controller=this.controllers[controllerID];var action=this.actions[controller.actionID];var index=_.findIndex(this.controllerStack,function(controllerID){var controller=self.controllers[controllerID];return controller.actionID===action.jsID;});this.studioControllerIndex=undefined;var options={additional_context:action.context,index:index,viewType:this.studioViewType,};if(this.studioViewType==='form'){if(controller.widget){options.resID=controller.widget.exportState().currentId;}}
return this.doAction(action.id,options);},studioHistoryBack:function(){var controller=this.controllerStack[this.studioControllerIndex+1];this._restoreController(controller);},_detachCurrentController:function(){var currentAction=this.getCurrentAction();if(currentAction&&!currentAction.studioNavigation){this._super.apply(this,arguments);}},_executeWindowAction:function(action,options){if(action.studioNavigation){this._processStudioAction(action,options);this.actions[action.jsID]=action;var controller={actionID:action.jsID,jsID:_.uniqueId('controller_'),};this.controllers[controller.jsID]=controller;this.controllerStack.push(controller.jsID);this.studioControllerIndex=0;this.navigatingInStudio=true;return Promise.resolve(action);}
return this._super.apply(this,arguments);},_getControllerStackIndex:function(options){if(options.studio_clear_studio_breadcrumbs){return this.studioControllerIndex+1;}
return this._super.apply(this,arguments);},_pushController:function(controller){var length;if(this.navigatingInStudio){this.navigatingInStudio=false;length=this.controllerStack.length;var toDestroy=this.controllerStack.slice(0,length-1);this._removeControllers(toDestroy);this.controllerStack=this.controllerStack.slice(length-1);controller.index=1;}
this._super.apply(this,arguments);if(this.studioControllerIndex!==undefined){var indexFrom=this.studioControllerIndex+1;var indexTo=this.controllerStack.length-1;var breadcrumbs=this._getBreadcrumbs(this.controllerStack.slice(indexFrom,indexTo));controller.widget.updateControlPanel({breadcrumbs});}},_processStudioAction:function(action){action.controllers={};var views=_.map(action.views,function(view){return{type:view[1],viewID:view[0],};});action._views=action.views;action.views=views;},_onEditionModeEntered:function(viewType){if(viewType!=='search'){this.studioViewType=viewType;}},_onPushState:function(ev){if(!ev.data.studioPushState){this._super.apply(this,arguments);}},_onReloadAction:function(ev){var self=this;var action=_.findWhere(this.actions,{id:ev.data.actionID});this._loadAction(action.id).then(function(result){self._preprocessAction(result,{additional_context:action.context});self._processStudioAction(result,{});result.jsID=action.jsID;self.actions[action.jsID]=result;bus.trigger('action_changed',result);if(ev.data.onSuccess){ev.data.onSuccess(result);}});},_onStudioToggled:function(mode){if(mode==='main'){this.studioControllerIndex=this.controllerStack.length-2;}},});});;

/* /web_studio/static/src/js/bus.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.bus',function(require){"use strict";var Bus=require('web.Bus');var bus=new Bus();return bus;});;

/* /web_studio/static/src/js/systray_item.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.SystrayItem',function(require){"use strict";var SystrayMenu=require('web.SystrayMenu');var Widget=require('web.Widget');var SystrayItem=Widget.extend({events:{'click':'_onClick',},sequence:2,template:'web_studio.SystrayItem',init:function(){this._super.apply(this,arguments);this.disabled=true;},disable:function(){this.disabled=true;this.renderElement();},enable:function(){this.disabled=false;this.renderElement();},_onClick:function(event){event.preventDefault();this.disable();this.trigger_up('studio_icon_clicked');},});SystrayMenu.Items.unshift(SystrayItem);return SystrayItem;});;

/* /web_studio/static/src/js/web_client.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.WebClient',function(require){"use strict";const ajax=require('web.ajax');const{bus,_t}=require('web.core');const session=require('web.session');const WebClient=require('web.WebClient');const studioBus=require('web_studio.bus');const SystrayItem=require('web_studio.SystrayItem');WebClient.include({events:_.extend({},WebClient.prototype.events,{'new-app':'openAppCreator','reload_menu_data':'_onReloadMenuData',}),custom_events:_.extend({},WebClient.prototype.custom_events,{'new_app_created':'_onNewAppCreated','reload_menu_data':'_onReloadMenuData','studio_history_back':'_onStudioHistoryBack','studio_icon_clicked':'_onStudioIconClicked','switch_studio_view':'_onSwitchStudioView',}),init:function(){this._super.apply(this,arguments);this.studioMode=false;},current_action_updated:function(action){this._super.apply(this,arguments);if(!this.studioMode){this._updateStudioSystray(this._isStudioEditable(action));}},_instanciateMenu:async function(){const menu=await this._super.apply(this,arguments);if(this.studioMode==='main'){const action=this.action_manager.getCurrentStudioAction();if(action){await menu.renderStudioMenu(action);}}
return menu;},do_action:function(action,options){if(this.studioMode==='main'&&action.target==='new'){this.do_warn(false,_t("Wizards are not editable with Studio"));return Promise.reject();}
var blockPushState=this.studioMode&&!action.studioNavigation;if(blockPushState){options=options||{};options.pushState=false;}
var prom=this._super(action,options);prom.then(function(action){if(blockPushState){action.pushState=false;}});return prom;},on_app_clicked:async function(){if(this.studioMode){this.openingMenu=true;}
await this._super(...arguments);this.openingMenu=false;},openAppCreator:async function(){await this.do_action('action_web_studio_app_creator');this.menu.toggle_mode(true,false);},show_application:async function(){const _super=this._super.bind(this);const qs=$.deparam.querystring();this.studioMode=['main','app_creator'].includes(qs.studio)&&qs.studio;if(this.studioMode){await ajax.loadLibs({assetLibs:this._studioAssets});}
await _super(...arguments);if(this.studioMode){this._updateContext();return this._openStudio();}},toggleHomeMenu:function(display){if(this.studioMode){if(display){this.studioMode='app_creator';}else{var action=this.action_manager.getCurrentAction();if(action&&action.tag==='action_web_studio_app_creator'){this.studioMode='app_creator';}else{this.studioMode='main';}
if(this.openingMenu){return;}}
this._toggleStudioMode();}else{if(display){this._updateStudioSystray(true);}}
this.homeMenuManager.state.studioMode=this.studioMode;return this._super(...arguments);},_instanciateHomeMenuWrapper:function(){const homeMenuManager=this._super(...arguments);homeMenuManager.state.studioMode=this.studioMode;return homeMenuManager;},_closeStudio:async function(){const action=this.action_manager.getCurrentAction();if(this.homeMenuManagerDisplayed){this.menu.toggle_mode(true,false);await this._updateStudioSystray(true);}else if(action.tag==='action_web_studio_app_creator'){this.menu.toggle_mode(true,false);await this.toggleHomeMenu(true);}else{await this.action_manager.restoreStudioAction();}
this._toggleStudioMode();this.el.classList.toggle('o_in_studio',Boolean(this.studioMode));},_isStudioEditable:function(action){return Boolean(action&&action.xml_id&&action.type==='ir.actions.act_window'&&action.res_model&&(action.res_model.indexOf('settings')===-1||action.res_model.indexOf('x_')===0)&&action.res_model!=='board.board');},_navigateInStudio:function(viewType){var self=this;var action=this.action_manager.getLastAction();var options={action:action,viewType:viewType,};return this._openStudioMain(options).then(function(){self.openingMenu=false;});},_openMenu:function(action,options){var self=this;if(this.studioMode){if(!this._isStudioEditable(action)){this.do_warn(false,_t("This action is not editable by Studio"));return Promise.reject();}
action.studioNavigation=true;}
return this._super.apply(this,arguments).then(function(){if(self.studioMode){return self._navigateInStudio(options.viewType);}});},_studioAssets:['web_editor.compiled_assets_wysiwyg','web_studio.compiled_assets_studio'],_openStudio:async function(){await ajax.loadLibs({assetLibs:this._studioAssets});if(this.studioMode==='main'){var action=this.action_manager.getCurrentAction();var controller=this.action_manager.getCurrentController();await this._openStudioMain({action:action,controllerState:controller.widget.exportState(),viewType:controller.viewType,});}else{this.menu.toggle_mode(true,false);}
this.el.classList.toggle('o_in_studio',!!this.studioMode);this._toggleStudioMode();},_openStudioMain:function(options){return this.do_action('action_web_studio_action_editor',options);},_reinstanciateMenu:async function(newMenuData){const oldMenu=this.menu;this.menu=await this._instanciateMenu(newMenuData);if(oldMenu){oldMenu.destroy();}
this.el.prepend(this.menu.el);},_toggleStudioMode:function(){studioBus.trigger('studio_toggled',this.studioMode);const qs=$.deparam.querystring();if(this.studioMode){qs.studio=this.studioMode;}else{delete qs.studio;}
const{protocol,host,pathname,hash}=window.location;const url=`${protocol}//${host}${pathname}?${$.param(qs)}${hash}`;window.history.pushState({path:url},'',url);this.homeMenuManager.state.studioMode=this.studioMode;},_updateContext:function(){if(this.studioMode){session.user_context.studio=1;}else{delete session.user_context.studio;}},_updateStudioSystray:async function(show){const studioSystrayItem=this.menu.systray_menu.widgets.find(widget=>widget instanceof SystrayItem);if(show){await studioSystrayItem.enable();}else{await studioSystrayItem.disable();}},_onStudioHistoryBack:function(){this.action_manager.studioHistoryBack();},_onNewAppCreated:async function(ev){bus.trigger('clear_cache');const menuData=await this.load_menus();await this._reinstanciateMenu(menuData);this.homeMenuManager.updateMenuData(menuData);const detail=Object.assign({menu_id:null,action_id:null,options:{viewType:'form'},},ev.data);await this.on_app_clicked({detail});this.menu.toggle_mode(false);},_onReloadMenuData:async function(ev={}){const current_primary_menu=this.menu.current_primary_menu;bus.trigger('clear_cache');const menuData=await this.load_menus();await this._reinstanciateMenu(menuData);this.homeMenuManager.updateMenuData(menuData);this.menu.toggle_mode(this.homeMenuManagerDisplayed);this.menu.change_menu_section(current_primary_menu);this.menu.switchMode(this.studioMode);this._updateStudioSystray(this.studioMode);const detail=ev.data||ev.detail||{};if(detail.keep_open&&this.menu.edit_menu){this.menu.edit_menu.editMenu(detail.scroll_to_bottom);}
if(detail.def){detail.def.resolve();}
if(detail.callback){detail.callback();}},_onStudioIconClicked:async function(){const newMode=this.homeMenuManagerDisplayed?'app_creator':'main';this.studioMode=this.studioMode?false:newMode;this._updateContext();if(this.studioMode){await this._openStudio();}else{await this._closeStudio();}
this.homeMenuManager.state.studioMode=this.studioMode;},_onSwitchStudioView:function(ev){var action=this.action_manager.getCurrentStudioAction();var controller=this.action_manager.getCurrentStudioController();var params=_.extend({},ev.data,{action:action,});if(controller.widget){params.controllerState=controller.widget.exportState();}
this._openStudioMain(params);},});});;

/* /web_studio/static/src/js/menu.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.Menu',function(require){"use strict";var core=require('web.core');var Dialog=require('web.Dialog');var framework=require('web.framework');var Menu=require('web_enterprise.Menu');var session=require('web.session');var bus=require('web_studio.bus');var EditMenu=require('web_studio.EditMenu');var NewModel=require('web_studio.NewModel')
var SubMenu=require('web_studio.SubMenu');var qweb=core.qweb;var _t=core._t;Menu.include({events:_.extend({},Menu.prototype.events,{'click .o_web_studio_change_background':'_onChangeBackground','click .o_web_studio_reset_default_background':'_onResetDefaultBackground','click .o_web_studio_export':'_onExport','click .o_web_studio_import':'_onImport',}),init:function(){this._super.apply(this,arguments);bus.on('studio_toggled',this,this.switchMode);bus.on('studio_main',this,this._onStudioMain);this.widget="image";this.accepted_file_extensions='image/*';this.company_id=session.company_id;this.fileupload_id=_.uniqueId('o_fileupload');$(window).on(this.fileupload_id,this._onBackgroundLoaded.bind(this));},destroy:function(){$(window).off(this.fileupload_id);return this._super.apply(this,arguments);},renderStudioMenu:function(action){if(this.studio_menu){this.studio_menu.destroy();}
this.studio_menu=new SubMenu(this,action);return this.studio_menu.insertAfter(this.$('.o_main_navbar'));},switchMode:function(mode){var self=this;var old_mode=this.studio_mode;if(old_mode===mode){return;}
this.studio_mode=mode;this._clean();if(mode){var $main_navbar=this.$('.o_main_navbar');if(!old_mode){this.$detached_systray=this.$('.o_menu_systray').detach();}
if(mode==='main'){if(this.studio_menu){this.studio_menu.$el.insertAfter(this.$('.o_main_navbar'));}
if(this.current_primary_menu){this.edit_menu=new EditMenu.MenuItem(this,this.menu_data,this.current_primary_menu);this.edit_menu.appendTo($main_navbar.find('.o_menu_sections'));this.newModelItem=new NewModel.NewModelItem(this,this.current_primary_menu);this.newModelItem.appendTo($main_navbar.find('.o_menu_sections'));}}else{this.$home_studio_menu=$(qweb.render('web_studio.HomeStudioMenu',{widget:this,}));this.$home_studio_menu.appendTo($main_navbar);if(this.studio_menu){this.studio_menu.$el.detach();}}
this.$leave_button=$('<div>').addClass('o_web_studio_leave').append($('<a>',{href:'#',class:'btn btn-primary',text:_t("Close"),})).click(function(event){event.preventDefault();if(!$(this).hasClass('o_disabled')){self.trigger_up('studio_icon_clicked');}
$(this).addClass('o_disabled');});this.$leave_button.appendTo($main_navbar);this.$notes=$('<div>').addClass('o_web_studio_notes').append($('<a>',{href:'http://pad.odoo.com/p/customization-'+session.dbuuid,target:'_blank',text:_t("Notes"),}));this.$notes.appendTo($main_navbar);}else{this.$detached_systray.prependTo('.o_main_navbar');if(this.studio_menu){this.studio_menu.destroy();this.studio_menu=undefined;}}},toggle_mode:function(home_menu){this._super.apply(this,arguments);if(!home_menu&&this.$home_studio_menu){this.$home_studio_menu.remove();}},_clean:function(){if(this.edit_menu){this.edit_menu.destroy();this.edit_menu=undefined;}
if(this.newModelItem){this.newModelItem.destroy();this.newModelItem=undefined;}
if(this.$notes){this.$notes.remove();this.$nodes=undefined;}
if(this.$leave_button){this.$leave_button.remove();this.$leave_button=undefined;}
if(this.$home_studio_menu){this.$home_studio_menu.remove();this.$home_studio_menu=undefined;}},_setBackgroundImage:function(attachment_id){return this._rpc({route:'/web_studio/set_background_image',params:{attachment_id:attachment_id,context:session.user_context,},});},_onBackgroundLoaded:function(event,result){if(result.error||!result.id){this.do_warn(result.error);}else{framework.blockUI();this._setBackgroundImage(result.id).then(function(){window.location.reload();}).guardedCatch(function(){framework.unblockUI();});}},_onChangeBackground:function(){var self=this;this.$('input.o_input_file').on('change',function(){self.$('form.o_form_binary_form').submit();});this.$('input.o_input_file').click();},_onExport:function(event){event.preventDefault();var $export=$(event.currentTarget);$export.addClass('o_disabled');session.get_file({url:'/web_studio/export',complete:$export.removeClass.bind($export,'o_disabled'),});},_onImport:function(event){event.preventDefault();var self=this;this.do_action({name:'Import modules',res_model:'base.import.module',views:[[false,'form']],type:'ir.actions.act_window',target:'new',context:{dialog_size:'medium',},},{on_close:function(){self.trigger_up('reload_menu_data');},});},_onResetDefaultBackground:function(){var self=this;var message=_t('Are you sure you want to reset the background image?');Dialog.confirm(this,message,{confirm_callback:function(){framework.blockUI();self._rpc({route:'/web_studio/reset_background_image',params:{context:session.user_context,},}).then(function(){window.location.reload();}).guardedCatch(function(){framework.unblockUI();});}});},_onStudioMain:function(action){this.renderStudioMenu(action);},});});;

/* /web_studio/static/src/js/common_menu_dialog.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.CommonMenuDialog',function(require){"use strict";const Dialog=require('web.Dialog');const{ModelConfiguratorDialog}=require('web_studio.ModelConfigurator');const StandaloneFieldManagerMixin=require('web.StandaloneFieldManagerMixin');const CommonMenuDialog=Dialog.extend(StandaloneFieldManagerMixin,{custom_events:Object.assign({},Dialog.prototype.custom_events,StandaloneFieldManagerMixin.custom_events,{edit_menu_disable_save:function(){this.$footer.find('.confirm_button').attr("disabled","disabled");},edit_menu_enable_save:function(){this.$footer.find('.confirm_button').removeAttr("disabled");},confirm_options:'_onConfirmOptions',cancel_options:'_onCancelOptions',}),init(parent,params){this.on_saved=params.on_saved||function(){};this.parent_menu_id=params.parent_menu_id;this.options={title:this.title,size:'small',};this._super(parent,this.options);StandaloneFieldManagerMixin.init.call(this);},async _onConfigureModel(){this.$footer.find('.btn').attr('disabled','').addClass('disabled');this.modelConfiguratorDialog=new ModelConfiguratorDialog(this,{confirmLabel:this.confirmLabel});this.modelConfiguratorDialog.open();},_onCancelOptions(ev){this.$footer.find('.btn').removeClass('disabled').attr('disabled',null);},async _onConfirmOptions(ev){this.model_options=Object.entries(ev.data).filter(opt=>opt[1].value).map(opt=>opt[0]);return this._onSave().then((res)=>{this.modelConfiguratorDialog.close();this.close();return res;}).guardedCatch(()=>this.modelConfiguratorDialog.close());},_onSave(){this.$footer.find('.btn').attr('disabled','').addClass('disabled');const name=this.el.querySelector('input').value;return this._doSave(name).then((menu)=>{this.on_saved(menu);}).guardedCatch(()=>{this.$footer.find('.btn').removeAttr('disabled').removeClass('disabled');});},_doSave(menuName){},});return CommonMenuDialog;});;

/* /web_studio/static/src/js/edit_menu.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.EditMenu',function(require){"use strict";const CommonMenuDialog=require('web_studio.CommonMenuDialog');var config=require('web.config');var core=require('web.core');var Dialog=require('web.Dialog');var FieldManagerMixin=require('web.FieldManagerMixin');var form_common=require('web.view_dialogs');var relational_fields=require('web.relational_fields');var session=require('web.session');var StandaloneFieldManagerMixin=require('web.StandaloneFieldManagerMixin');var Widget=require('web.Widget');var Many2One=relational_fields.FieldMany2One;const FieldRadio=relational_fields.FieldRadio;var _t=core._t;var MenuItem=Widget.extend({template:'web_studio.EditMenu.MenuItem',events:{'click .o_web_edit_menu':'_onClick',},init:function(parent,menu_data,current_primary_menu){this._super.apply(this,arguments);this.menu_data=menu_data;this.current_primary_menu=current_primary_menu;},editMenu:function(scrollToBottom){new EditMenuDialog(this,this.menu_data,this.current_primary_menu,scrollToBottom).open();},_onClick:function(event){event.preventDefault();this.editMenu();},});var EditMenuDialog=Dialog.extend({template:'web_studio.EditMenu.Dialog',events:_.extend({},Dialog.prototype.events,{'click button.js_edit_menu':'_onEditMenu','click button.js_delete_menu':'_onDeleteMenu',}),init:function(parent,menu_data,current_primary_menu,scrollToBottom){var options={title:_t('Edit Menu'),size:'medium',dialogClass:'o_web_studio_edit_menu_modal',buttons:[{text:_t("Confirm"),classes:'btn-primary',click:this._onSave.bind(this),},{text:_t("Cancel"),close:true,},{icon:'fa-plus-circle',text:_t("New Menu"),classes:'btn-secondary js_add_menu ml-auto',click:this._onAddMenu.bind(this),}],};this.current_primary_menu=current_primary_menu;this.roots=this.getMenuDataFiltered(menu_data);this.scrollToBottom=scrollToBottom;this.to_delete=[];this.to_move={};this._super(parent,options);},start:function(){this.$('.oe_menu_editor').nestedSortable({listType:'ul',handle:'div',items:'li',maxLevels:5,toleranceElement:'> div',forcePlaceholderSize:true,opacity:0.6,placeholder:'oe_menu_placeholder',tolerance:'pointer',attribute:'data-menu-id',expression:'()(.+)',relocate:this.moveMenu.bind(this),rtl:_t.database.parameters.direction==="rtl",});this.opened().then(()=>{if(this.scrollToBottom){this.$el.scrollTop(this.$el.prop('scrollHeight'));}});return this._super.apply(this,arguments);},getMenuDataFiltered:function(menu_data){var self=this;var menus=menu_data.children.filter(function(el){return el.id===self.current_primary_menu;});return menus;},moveMenu:function(ev,ui){var self=this;var $menu=$(ui.item);var menu_id=$menu.data('menu-id');this.to_move[menu_id]={parent_menu_id:$menu.parents('[data-menu-id]:first').data('menu-id')||this.current_primary_menu,sequence:$menu.index(),};_.each($menu.siblings('li'),function(el){var menu_id=$(el).data('menu-id');if(menu_id in self.to_move){self.to_move[menu_id].sequence=$(el).index();}else{self.to_move[menu_id]={sequence:$(el).index()};}});},_reloadMenuData:function(keep_open,scrollToBottom){this.trigger_up('reload_menu_data',{keep_open:keep_open,scroll_to_bottom:scrollToBottom});},_onAddMenu:function(ev){ev.preventDefault();var self=this;new NewMenuDialog(this,{parent_menu_id:this.current_primary_menu,on_saved:function(){self._saveChanges().then(function(){self._reloadMenuData(true,true);});},}).open();},_onDeleteMenu:function(ev){var $menu=$(ev.currentTarget).closest('[data-menu-id]');var menu_id=$menu.data('menu-id')||0;if(menu_id){this.to_delete.push(menu_id);}
$menu.remove();},_onEditMenu:function(ev){var self=this;var menu_id=$(ev.currentTarget).closest('[data-menu-id]').data('menu-id');new form_common.FormViewDialog(this,{res_model:'ir.ui.menu',res_id:menu_id,on_saved:function(){self._saveChanges().then(function(){self._reloadMenuData(true);});},}).open();},_onSave:function(){var self=this;const $menus=this.$("[data-menu-id]");if(!$menus.length){return Dialog.alert(self,_t('You cannot remove all the menu items of an app.\r\nTry uninstalling the app instead.'));}
if(!_.isEmpty(this.to_move)||!_.isEmpty(this.to_delete)){this._saveChanges().then(function(){self._reloadMenuData();});}else{this.close();}},_saveChanges:function(){return this._rpc({model:'ir.ui.menu',method:'customize',kwargs:{to_move:this.to_move,to_delete:this.to_delete,},});},});var EditMenuMany2One=Many2One.extend({_quickCreate:function(){this.trigger_up('edit_menu_disable_save');var def=this._super.apply(this,arguments);Promise.resolve(def).then(this.trigger_up.bind(this,'edit_menu_enable_save'),this.trigger_up.bind(this,'edit_menu_enable_save'));},});const NewMenuDialog=CommonMenuDialog.extend({template:'web_studio.EditMenu.Dialog.New',init:function(parent,params){this.title=_t('Create a new Menu');this.confirmLabel=_t('Create Menu');this._super(...arguments);},async willStart(){await this._super(...arguments);this.set_buttons([{text:_t("Confirm"),classes:'btn-primary confirm_button',click:this._onSave.bind(this)},{text:_t("Cancel"),close:true}]);},start:function(){var self=this;var defs=[];this.opened().then(function(){self.$modal.addClass('o_web_studio_add_menu_modal');self.$el.find('input[name="name"]').focus();});defs.push(this._super.apply(this,arguments));defs.push(this.model.makeRecord('ir.actions.act_window',[{name:'model',relation:'ir.model',type:'many2one',domain:[['transient','=',false],['abstract','=',false]],},{name:'model_choice',type:'selection',selection:[['new',_t('New Model')],['existing',_t('Existing Model')],['parent',_t('Parent Menu')]],value:'new',}]).then(function(recordID){var options={mode:'edit',};var record=self.model.get(recordID);self.many2one=new EditMenuMany2One(self,'model',record,options);self.many2one.nodeOptions.no_create_edit=!config.isDebug();self.many2one.nodeOptions.no_create=!config.isDebug();self._registerWidget(recordID,'model',self.many2one);self.many2one.appendTo(self.$('.js_model'));self.model_choice=new FieldRadio(self,'model_choice',record,options);self._registerWidget(recordID,'model_choice',self.model_choice)
self.model_choice.appendTo(self.$('.model_choice'));self._onChangeModelChoice();}));return Promise.all(defs);},_doSave(menuName){this._super(...arguments);const modelID=this.many2one.value&&this.many2one.value.res_id;core.bus.trigger('clear_cache');return this._rpc({route:'/web_studio/create_new_menu',params:{menu_name:menuName,model_id:modelID,model_choice:this.model_choice.value,model_options:this.model_options,parent_menu_id:this.parent_menu_id,context:session.user_context,},});},_onChangeModelChoice:function(){const new_model=this.model_choice.value==='new';this.set_buttons([{text:new_model?_t("Configure Model"):_t('Confirm'),classes:'btn-primary confirm_button',click:new_model?this._onConfigureModel.bind(this):this._onSave.bind(this),},{text:_t("Cancel"),close:true}]);this.$('.model_chooser').toggle(this.model_choice.value==='existing');},_onCancelOptions:function(ev){this.$footer.find('.btn').removeClass('disabled').attr('disabled',null);},_onFieldChanged:async function(ev){const res=await StandaloneFieldManagerMixin._onFieldChanged.apply(this,arguments);this._onChangeModelChoice();return res;},});return{MenuItem:MenuItem,Dialog:EditMenuDialog,};});;

/* /web_studio/static/src/js/new_model.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.NewModel',function(require){"use strict";const core=require('web.core');const session=require('web.session');const Widget=require('web.Widget');const CommonMenuDialog=require('web_studio.CommonMenuDialog');const _t=core._t;const NewModelItem=Widget.extend({xmlDependencies:['/web_studio/static/src/xml/new_model.xml'],template:'web_studio.NewModel',events:{'click .o_web_create_new_model':'_onClick',},init(parent,currentPrimaryMenu){this._super(...arguments);this.current_primary_menu=currentPrimaryMenu;},_onClick(event){event.preventDefault();new NewModelDialog(this,{parent_menu_id:this.current_primary_menu,on_saved(menu){this.trigger_up('reload_menu_data');this.trigger_up('menu_clicked',{openAction:true,menu_id:this.current_primary_menu,action_id:menu.action_id,options:{viewType:'form'},});},}).open();},});const NewModelDialog=CommonMenuDialog.extend({template:'web_studio.NewModel.Dialog',init(parent,params){this.title=_t('Create a new Model');this.confirmLabel=_t('Create Model');this._super(...arguments);},async willStart(){await this._super(...arguments);this.set_buttons([{text:_t("Configure Model"),classes:'btn-primary confirm_button',click:this._onConfigureModel.bind(this),},{text:_t("Cancel"),close:true}]);},async start(){await this._super(...arguments);this.opened(()=>{this.$modal.addClass('o_web_studio_new_model_modal');this.el.querySelector('input[name="name"]').focus();});},_doSave(menuName){this._super(...arguments);core.bus.trigger('clear_cache');return this._rpc({route:'/web_studio/create_new_menu',params:{menu_name:menuName,model_id:false,model_choice:'new',model_options:this.model_options,parent_menu_id:this.parent_menu_id,context:session.user_context,},});},});return{NewModelItem:NewModelItem,};});;

/* /web_studio/static/src/js/submenu.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.SubMenu',function(require){"use strict";var ajax=require('web.ajax');var core=require('web.core');var session=require('web.session');var Widget=require('web.Widget');var bus=require('web_studio.bus');var _t=core._t;var SubMenu=Widget.extend({template:'web_studio.Menu',events:{'click .o_menu_sections > li':'_onMenu','click .o_web_studio_undo':'_onUndo','click .o_web_studio_redo':'_onRedo','click .o_menu_sections .o_web_studio_views_icons > a':'_onIcon',},init:function(parent,action){this._super.apply(this,arguments);this.action=action;this.active_view_types=this._getActiveViewTypes();this.activeMenu='Views';this.studio_actions=[{action:'action_web_studio_action_editor',title:'Views'}];this.multi_lang=session.multi_lang;this._isRedoToggled=false;this._isUndoToggled=false;bus.on('action_changed',this,this._onActionChanged);bus.on('undo_available',this,this._onToggleUndo.bind(this,true));bus.on('undo_not_available',this,this._onToggleUndo.bind(this,false));bus.on('redo_available',this,this._onToggleRedo.bind(this,true));bus.on('redo_not_available',this,this._onToggleRedo.bind(this,false));bus.on('toggle_snack_bar',this,this._onToggleSnackBar);bus.on('edition_mode_entered',this,this._onEditionModeEntered);bus.on('edition_x2m_entered',this,this._onX2MEntered);bus.on('report_template_opened',this,this._onReportTemplateOpened);bus.on('report_template_closed',this,this._onReportTemplateClosed);},renderElement:function(){this._super.apply(this,arguments);this._setActiveButtons();this._renderBreadcrumb();},_addAction:function(options){this.studio_actions.push(options);if(this.$el){this.$('.o_menu_sections li a.active').removeClass('active');this.renderElement();}},_getActiveViewTypes:function(){return _.map(this.action.views,function(view){return view.type;});},_renderBreadcrumb:function(){var self=this;var $breadcrumb=$('<ol>').addClass('breadcrumb');_.each(this.studio_actions,function(bc,index){$breadcrumb.append(self._renderBreadcrumbsLi(bc,index,self.studio_actions.length));});this.$('.o_web_studio_breadcrumb').empty().append($breadcrumb);},_renderBreadcrumbsLi:function(bc,index,length){var self=this;var is_last=(index===length-1);var li_content=bc.title&&_.escape(bc.title.trim());var $bc=$('<li>',{class:'breadcrumb-item'}).append(li_content).toggleClass('active',is_last);if(!is_last){$bc.click(function(){if(bc.action.res_model==='ir.actions.report'){self.studio_actions.pop();self.trigger_up('studio_history_back');self.renderElement();return;}
var options={action:self.action,replace_last_action:true,index:index,};if(bc.viewType){options.viewType=bc.viewType;}
if(bc.x2mEditorPath){options.x2mEditorPath=bc.x2mEditorPath.slice();}
if(bc.viewName){options.viewName=bc.viewName;}
self._replaceAction(bc.action,bc.title,options);});$bc.toggleClass('o_back_button');}
return $bc;},_replaceAction:function(action,title,options){if(options.viewType){if(options.index>1){this.studio_actions.length=options.index+1;}else{this.studio_actions=[{action:'action_web_studio_action_editor',title:_t('Views')},{action:action,title:title,viewType:options.viewType},];}}else{this.studio_actions=[{action:action,title:title}];}
delete options.index;if(action==='action_web_studio_action_editor'){options.noEdit=!options.viewType;}
this.activeMenu=title;if(action._originalAction){action=JSON.parse(action._originalAction);}
if(action==='action_web_studio_action_editor'){this.trigger_up('switch_studio_view',options);}else{this.do_action(action,options);}
this.renderElement();},_setActiveButtons(){const $active_menu=this.$(`.o_menu_sections li:contains(${this.activeMenu})`);const is_action_menu=$active_menu.data('name')==='views';const cur_act=this.studio_actions[this.studio_actions.length-1];const is_action_overview=cur_act.action==='action_web_studio_action_editor'&&!cur_act.viewType;if(!(is_action_menu&&!is_action_overview)){this.$(`.o_menu_sections li:contains(${this.activeMenu})`).addClass('active');}
if(this.studio_actions.length===0){return;}
const currentAction=_.last(this.studio_actions);const isReportAction=currentAction.action==='web_studio.action_edit_report';this.$('.o_web_studio_menu_undo_redo').toggleClass('d-none',!currentAction.viewType&&!isReportAction);this.$('.o_web_studio_breadcrumb').toggleClass('o_web_studio_breadcrumb_report',isReportAction);},_onActionChanged:function(new_action){this.action=new_action;this.active_view_types=this._getActiveViewTypes();this.studio_actions=[{action:'action_web_studio_action_editor',title:'Views'}];this.renderElement();},_onEditionModeEntered:function(viewType){if(this.studio_actions.length===1){var bcOptions={action:'action_web_studio_action_editor',viewType:viewType,title:viewType.charAt(0).toUpperCase()+viewType.slice(1),};this._addAction(bcOptions);}},_onIcon:function(ev){ev.preventDefault();var view_name=$(ev.currentTarget).data('name');return this._replaceAction('action_web_studio_action_editor',view_name,{action:this.action,replace_last_action:true,viewType:view_name,});},_onMenu:function(ev){var $menu=$(ev.currentTarget);if(!$menu.data('name')){return;}
var title=$menu.text();var name=$menu.data('name');if(name==='views'){this._replaceAction('action_web_studio_action_editor',title,{action:this.action,studio_clear_studio_breadcrumbs:true,});}else if(_.contains(['automations','reports','acl','filters','translations'],name)){var self=this;ajax.jsonRpc('/web_studio/get_studio_action','call',{action_name:name,model:this.action.res_model,view_id:this.action.view_id[0],}).then(function(result){self._replaceAction(result,title,{studio_clear_studio_breadcrumbs:true,});});}},_onRedo:function(){bus.trigger('redo_clicked');},_onReportTemplateClosed:function(){if(this.studio_actions.length>1){this.studio_actions.pop();}
this.renderElement();},_onReportTemplateOpened:function(reportName){if(this.studio_actions.length>1){this.studio_actions.pop();}
var bcOptions={action:'web_studio.action_edit_report',title:reportName,};this._addAction(bcOptions);},_onToggleUndo:function(display){this._isUndoToggled=display;this.$('.o_web_studio_undo').toggleClass('o_web_studio_active',display);},_onToggleRedo:function(display){this._isRedoToggled=display;this.$('.o_web_studio_redo').toggleClass('o_web_studio_active',display);},_onToggleSnackBar(type){switch(type){case'saved':this.$('.o_web_studio_snackbar_icon').removeClass('fa-spinner fa-pulse');this.$('.o_web_studio_snackbar_icon').addClass('show fa fa-check');this.$('.o_web_studio_snackbar_text').text(_t("Saved"));break;case'saving':this.$('.o_web_studio_snackbar_icon').addClass('show fa fa-spinner fa-pulse');this.$('.o_web_studio_snackbar_text').text(_t("Saving"));break;}},_onUndo:function(){bus.trigger('undo_clicked');},_onX2MEntered:function(subviewType,x2mEditorPath){var bcOptions={action:'action_web_studio_action_editor',viewType:subviewType,x2mEditorPath:x2mEditorPath.slice(),title:_t('Subview ')+subviewType,};this._addAction(bcOptions);},});return SubMenu;});;

/* /web_studio/static/src/js/studio_home_menu.js defined in bundle 'web_studio.assets' */
odoo.define("web_studio.StudioHomeMenu",function(require){"use strict";const HomeMenu=require('web_enterprise.HomeMenu');const HomeMenuWrapper=require('web_enterprise.HomeMenuWrapper');const IconCreator=require('web_studio.IconCreator');const Dialog=require('web.OwlDialog');const NEW_APP_BUTTON={isNewAppButton:true,label:"New App",webIconData:'/web_studio/static/src/img/default_icon_app.png',};class StudioHomeMenu extends HomeMenu{constructor(){super(...arguments);this.state.iconCreatorDialogShown=false;this.state.editedAppData={};}
mounted(){super.mounted();this.canEditIcons=true;}
async willUpdateProps(nextProps){this.availableApps=this.state.query.length?this._filter(nextProps.apps):nextProps.apps;}
get displayedApps(){return super.displayedApps.concat([NEW_APP_BUTTON]);}
_closeDialog(){this.state.iconCreatorDialogShown=false;delete this.initialAppData;}
_openMenu({menu,isApp}){if(menu.isNewAppButton){this.canEditIcons=false;this.trigger('new-app');}else{super._openMenu(...arguments);}}
async _onSave(){const{appId,type}=this.initialAppData;let iconValue;if(this.state.editedAppData.type!==type){if(this.state.editedAppData.type==='base64'){iconValue=this.state.editedAppData.uploaded_attachment_id;}else{const{iconClass,color,backgroundColor}=this.state.editedAppData;iconValue=[iconClass,color,backgroundColor];}}else if(this.state.editedAppData.type==='custom_icon'){const{iconClass,color,backgroundColor}=this.state.editedAppData;if(this.initialAppData.iconClass!==iconClass||this.initialAppData.color!==color||this.initialAppData.backgroundColor!==backgroundColor){iconValue=[iconClass,color,backgroundColor];}}else if(this.state.editedAppData.uploaded_attachment_id){iconValue=this.state.editedAppData.uploaded_attachment_id;}
if(iconValue){await this.rpc({route:'/web_studio/edit_menu_icon',params:{context:this.env.session.user_context,icon:iconValue,menu_id:appId,},});await new Promise(resolve=>{this.trigger('reload_menu_data',{callback:resolve,});});}
this._closeDialog();}
_onEditIconClick(app){if(!this.canEditIcons){return;}
if(app.webIconData){this.state.editedAppData={webIconData:app.webIconData,type:'base64',};}else{this.state.editedAppData={backgroundColor:app.webIcon.backgroundColor,color:app.webIcon.color,iconClass:app.webIcon.iconClass,type:'custom_icon',};}
this.initialAppData=Object.assign({appId:app.id,},this.state.editedAppData);this.state.iconCreatorDialogShown=true;}
_onIconChanged(ev){for(const key in this.state.editedAppData){delete this.state.editedAppData[key];}
for(const key in ev.detail){this.state.editedAppData[key]=ev.detail[key];}}
_onNewAppClick(){this.canEditIcons=false;this.trigger('new-app');}}
StudioHomeMenu.components=Object.assign({},HomeMenu.components,{IconCreator,Dialog});StudioHomeMenu.props={apps:HomeMenu.props.apps};StudioHomeMenu.template="web_studio.StudioHomeMenu";HomeMenuWrapper.components=Object.assign({},HomeMenuWrapper.components,{StudioHomeMenu});return StudioHomeMenu;});;

/* /web_studio/static/src/js/icon_creator.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.IconCreator',function(require){"use strict";const{COLORS,BG_COLORS,ICONS}=require('web_studio.utils');const CustomFileInput=require('web.CustomFileInput');const{Component,hooks}=owl;const{useRef,useState}=hooks;const DEFAULT_ICON={backgroundColor:BG_COLORS[5],color:COLORS[4],iconClass:ICONS[0],};class IconCreator extends Component{constructor(){super(...arguments);this.COLORS=COLORS;this.BG_COLORS=BG_COLORS;this.ICONS=ICONS;this.iconRef=useRef('app-icon');this.show=useState({backgroundColor:false,color:false,iconClass:false,});}
async willUpdateProps(nextProps){if('iconClass'in nextProps&&nextProps.iconClass!==this.props.iconClass){await new Promise(r=>$(this.iconRef.el).stop().fadeOut(50,r));this.transition=()=>$(this.iconRef.el).stop().fadeIn(800);}}
patched(){if(this.transition){this.transition();delete this.transition;}}
_onDesignIconClick(){this.trigger('icon-changed',Object.assign({type:'custom_icon'},DEFAULT_ICON));}
async _onFileUploaded(ev){if(!ev.detail.files.length){return;}
const file=ev.detail.files[0];const res=await this.rpc({model:'ir.attachment',method:'read',args:[[file.id],['datas']],});this.trigger('icon-changed',{type:'base64',uploaded_attachment_id:file.id,webIconData:'data:image/png;base64,'+res[0].datas.replace(/\s/g,''),});}
_onPaletteItemClick(palette,value){if(this.props[palette]===value){return;}
const detail={backgroundColor:this.props.backgroundColor,color:this.props.color,iconClass:this.props.iconClass,type:'custom_icon',};detail[palette]=value;this.trigger('icon-changed',detail);}
_onTogglePalette(palette){for(const pal in this.show){if(pal===palette){this.show[pal]=!this.show[pal];}else if(this.show[pal]){this.show[pal]=false;}}}}
IconCreator.components={CustomFileInput};IconCreator.defaultProps=DEFAULT_ICON;IconCreator.props={backgroundColor:{type:String,optional:1},color:{type:String,optional:1},editable:Boolean,iconClass:{type:String,optional:1},type:{validate:t=>['base64','custom_icon'].includes(t)},uploaded_attachment_id:{type:Number,optional:1},webIconData:{type:String,optional:1},};IconCreator.template='IconCreator';return IconCreator;});;

/* /web_studio/static/src/js/utils.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.utils',function(){"use strict";var COLORS=['#FFFFFF','#262c34','#00dec9','#2ecc71','#f1c40f','#FFAB4A','#EB5A46','#9b59b6','#0079BF','#4dd0e1',];var BG_COLORS=['#1abc9c','#58a177','#B4C259','#56829f','#636DA9','#34495e','#BC4242','#C6572A','#d49054','#D89F45','#DAB852','#606060','#6B6C70','#838383','#F5F5F5',];var ICONS=['fa fa-diamond','fa fa-bell','fa fa-calendar','fa fa-circle','fa fa-cube','fa fa-cubes','fa fa-flag','fa fa-folder-open','fa fa-home','fa fa-rocket','fa fa-sitemap','fa fa-area-chart','fa fa-balance-scale','fa fa-database','fa fa-globe','fa fa-institution','fa fa-random','fa fa-umbrella','fa fa-bed','fa fa-bolt','fa fa-commenting','fa fa-envelope','fa fa-flask','fa fa-magic','fa fa-pie-chart','fa fa-retweet','fa fa-shopping-basket','fa fa-star','fa fa-television','fa fa-tree','fa fa-thumbs-o-up','fa fa-file-o','fa fa-wheelchair','fa fa-code','fa fa-spinner','fa fa-ticket','fa fa-shield','fa fa-recycle','fa fa-phone','fa fa-microphone','fa fa-magnet','fa fa-info','fa fa-inbox','fa fa-heart','fa fa-bullseye','fa fa-cutlery','fa fa-credit-card','fa fa-briefcase',];function randomString(string_length){var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var randomstring='';for(var i=0;i<string_length;i++){var rnum=Math.floor(Math.random()*chars.length);randomstring+=chars.substring(rnum,rnum+1);}
return randomstring;}
return{COLORS:COLORS,BG_COLORS:BG_COLORS,ICONS:ICONS,randomString:randomString,};});;

/* /web_studio/static/src/js/tours/web_studio.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.tour',function(require){"use strict";var core=require('web.core');var tour=require('web_tour.tour');var utils=require('web_studio.utils');var _t=core._t;tour.register('web_studio_home_menu_background_tour',{url:"/web",sequence:260,},[{trigger:'.o_web_studio_navbar_item',content:_t('Want to customize the background? Let’s activate <b>Odoo Studio</b>.'),position:'bottom',extra_trigger:'.o_home_menu',},{trigger:'.o_web_studio_home_studio_menu a',content:_t('Click here.'),position:'right',},{trigger:'.o_web_studio_home_studio_menu .dropdown-menu .dropdown-item:eq(0)',content:_t('Change the <b>background</b>, make it yours.'),position:'bottom',}]);tour.register('web_studio_new_app_tour',{url:"/web?studio=app_creator",sequence:270,},[{trigger:'.o_web_studio_new_app',auto:true,position:'bottom',},{trigger:'.o_web_studio_app_creator_next',content:_t('I bet you can <b>build an app</b> in 5 minutes. Ready for the challenge?'),position:'top',},{trigger:'.o_web_studio_app_creator_name > input',content:_t('How do you want to <b>name</b> your app? Library, Academy, …?'),position:'right',run:'text '+utils.randomString(6),},{trigger:'.o_web_studio_selectors .o_web_studio_selector:eq(2)',content:_t('Now, customize your icon. Make it yours.'),position:'top',},{trigger:'.o_web_studio_app_creator_next.is_ready',content:_t('Go on, you are almost done!'),position:'top',},{trigger:'.o_web_studio_app_creator_menu > input',content:_t('How do you want to name your first <b>menu</b>? My books, My courses?'),position:'right',run:'text '+utils.randomString(6),},{trigger:'.o_web_studio_app_creator_next.is_ready',content:_t('Continue to configure some typical behaviors for your new type of object.'),position:'bottom',},{trigger:'.o_web_studio_model_configurator_next',content:_t('All set? You are just one click away from <b>generating your first app</b>.'),position:'bottom',},{trigger:'.o_web_studio_sidebar .o_web_studio_field_type_container:eq(1) .o_web_studio_field_char',content:_t('Nicely done! Let’s build your screen now; <b>drag</b> a <i>text field</i> and <b>drop</b> it in your view, on the right.'),position:'bottom',run:'drag_and_drop .o_web_studio_form_view_editor .o_inner_group',timeout:60000,},{trigger:'.o_web_studio_form_view_editor td.o_td_label',content:_t('To <b>customize a field</b>, click on its <i>label</i>.'),position:'bottom',},{trigger:'.o_web_studio_sidebar_content.o_display_field input[name="string"]',content:_t('Here, you can <b>name</b> your field (e.g. Book reference, ISBN, Internal Note, etc.).'),position:'bottom',run:'text My Field',},{extra_trigger:'.o_web_studio_form_view_editor td.o_td_label:contains(My Field)',trigger:'.o_web_studio_sidebar .o_web_studio_new',content:_t('Good job! To add more <b>fields</b>, come back to the <i>Add tab</i>.'),position:'bottom',},{trigger:'.o_web_studio_sidebar .o_web_studio_field_type_container:eq(1) .o_web_studio_field_selection',content:_t('Drag & drop <b>another field</b>. Let’s try with a <i>selection field</i>.'),position:'bottom',run:'drag_and_drop .o_web_studio_form_view_editor .o_inner_group',},{trigger:'.o_web_studio_field_dialog_form > .o_web_studio_add_selection input',content:_t("Create your <b>selection values</b> (e.g.: Romance, Polar, Fantasy, etc.)"),position:'top',run:'text '+utils.randomString(6),},{trigger:'.o_web_studio_field_dialog_form > .o_web_studio_add_selection .o_web_studio_add_selection_value',auto:true,},{trigger:'.modal-footer > button:eq(0)',auto:true,},{trigger:'.o_web_studio_sidebar_text',auto:true,},{trigger:'.o_web_studio_form_view_editor .o_Chatter',content:_t("Click to edit messaging features on your model."),position:'top',timeout:15000,},{trigger:'.o_web_studio_sidebar .o_display_chatter input[name="email_alias"]',content:_t("Set an <b>email alias</b>. Then, try to send an email to this address; it will create a document automatically for you. Pretty cool, huh?"),position:'bottom',},{trigger:'.o_web_studio_leave',content:_t("Let’s check the result. Close Odoo Studio to get an <b>overview of your app</b>."),position:'left',},{trigger:'input.o_required_modifier',auto:true,position:'bottom',},{trigger:'.o_control_panel .o_cp_buttons .o_form_button_save',content:_t("Save."),position:'right',},{trigger:'.o_web_studio_navbar_item',extra_trigger:'.o_form_view.o_form_readonly',content:_t("Wow, nice! And I’m sure you can make it even better! Use this icon to open <b>Odoo Studio</b> and customize any screen."),position:'bottom',},{trigger:'.o_web_studio_menu .o_menu_sections li[data-name="views"]',content:_t("Want more fun? Let’s create more <b>views</b>."),position:'bottom',},{trigger:'.o_web_studio_view_category .o_web_studio_view_type.o_web_studio_inactive[data-type="kanban"] .o_web_studio_thumbnail',content:_t("What about a <b>Kanban view</b>?"),position:'bottom',},{trigger:'.o_web_studio_sidebar .o_web_studio_new',content:_t("Now you’re on your own. Enjoy your <b>super power</b>."),position:'bottom',}]);});;

/* /web_studio/static/src/js/model_configurator.js defined in bundle 'web_studio.assets' */
odoo.define('web_studio.ModelConfigurator',function(require){"use strict";const config=require('web.config');const Dialog=require('web.Dialog');const{WidgetAdapterMixin,ComponentWrapper}=require('web.OwlCompatibility');const{Component,hooks}=owl;const{useState}=hooks;class ModelConfigurator extends Component{constructor(parent,props){super(parent,props);this.state=useState({options:{use_partner:{label:this.env._t('Contact details'),help:this.env._t('Get contact, phone and email fields on records'),value:false},use_responsible:{label:this.env._t('User assignment'),help:this.env._t('Assign a responsible to each record'),value:false},use_date:{label:this.env._t('Date & Calendar'),help:this.env._t('Assign dates and visualize records in a calendar'),value:false},use_double_dates:{label:this.env._t('Date range & Gantt'),help:this.env._t('Define start/end dates and visualize records in a Gantt chart'),value:false},use_stages:{label:this.env._t('Pipeline stages'),help:this.env._t('Stage and visualize records in a custom pipeline'),value:false},use_tags:{label:this.env._t('Tags'),help:this.env._t('Categorize records with custom tags'),value:false},use_image:{label:this.env._t('Picture'),help:this.env._t('Attach a picture to a record'),value:false},use_notes:{label:this.env._t('Notes'),help:this.env._t('Write additional notes or comments'),value:false},use_value:{label:this.env._t('Monetary value'),help:this.env._t('Set a price or cost on records'),value:false},use_company:{label:this.env._t('Company'),help:this.env._t('Restrict a record to a specific company'),value:false},use_sequence:{label:this.env._t('Custom Sorting'),help:this.env._t('Manually sort records in the list view'),value:true},use_mail:{label:this.env._t('Chatter'),help:this.env._t('Send messages, log notes and schedule activities'),value:true},use_active:{label:this.env._t('Archiving'),help:this.env._t('Archive deprecated records'),value:true},},saving:false,});this.multiCompany=this.env.session.display_switch_company_menu;}
_onConfirm(){this.trigger('confirm-options',Object.assign({},this.state.options));this.state.saving=true;}
_onPrevious(){this.trigger('previous');}}
class ModelConfiguratorOption extends Component{};ModelConfigurator.components={ModelConfiguratorOption};ModelConfigurator.props={debug:{type:Boolean,optional:true},embed:{type:Boolean,optional:true},label:{type:String},};ModelConfiguratorOption.props={name:String,option:{type:Object,shape:{label:String,debug:{type:Boolean,optional:true,},help:String,value:Boolean,}}};const _t=require('web.core')._t;const ModelConfiguratorDialog=Dialog.extend(WidgetAdapterMixin,{custom_events:Object.assign({},Dialog.prototype.custom_events,{'previous':'_onPrevious',}),init(parent,options){const res=this._super.apply(this,arguments);this.renderFooter=false;this.title=_t('Suggested features for your new model'),this.confirmLabel=options.confirmLabel;this.onForceClose=()=>this.trigger_up('cancel_options');return res;},async start(){const res=await this._super.apply(this,arguments);this.component=new ComponentWrapper(this,ModelConfigurator,{label:this.confirmLabel,embed:true,debug:Boolean(config.isDebug())});this.component.mount(this.el);return res;},close(){this.on_detach_callback();return this._super.apply(this,arguments);},destroy(){WidgetAdapterMixin.destroy.call(this);return this._super();},on_attach_callback(){WidgetAdapterMixin.on_attach_callback.call(this);return this._super.apply(this,arguments);},on_detach_callback(){WidgetAdapterMixin.on_detach_callback.call(this);return this._super.apply(this,arguments);},_onPrevious(ev){this.trigger_up('cancel_options');this.close();},});return{ModelConfigurator:ModelConfigurator,ModelConfiguratorDialog:ModelConfiguratorDialog,};});